# Техническое задание: League of Legends Draft Simulator

## Название и концепция

**Название:** LoL Draft Simulator  
**Концепция:** Веб-приложение, имитирующее официальный драфт-процесс из игры *League of Legends*. Позволяет двум командам (Синяя и Красная) поочерёдно банить и пикать чемпионов, а также распределять их по ролям (Top, Jungle, Mid, ADC, Support). Проект решает задачу тренировки стратегического мышления, подготовки к турнирам и совместного планирования составов в дружеской или соревновательной среде.

## Целевая аудитория и роли

- **Гость:** Может создать новую комнату для драфта и получить уникальную ссылку для приглашения другого участника.
- **Участник драфта:** Присоединяется к существующей комнате по ссылке, автоматически получает роль капитана одной из команд (Синей или Красной), участвует в банах и пиках.
- **Администратор:** Не предусмотрен — система полностью децентрализована, управление осуществляется через UI без авторизации.

Доступ к функционалу регулируется через cookies (сохранение UID пользователя) и состояние комнаты.

## Схема данных (Сущности)

Проект использует три основные кастомные модели:

1. **DraftRoom** — основная сущность, представляющая игровую комнату:
   - `room_id` — уникальный идентификатор комнаты (UUID)
   - `created_at` — дата и время создания
   - `blue_captain`, `red_captain` — имена капитанов команд (строки, хранятся из cookie)
   - `status` — текущее состояние комнаты (`waiting`, `banning`, `picking`, `finished`)
   - `cur_turn` — чья очередь (`blue` или `red`)
   - `turn_index` — индекс текущего хода (для определения фазы: 1–2 баны, 3–7 пики и т.д.)

2. **BanPhase** — данные о забаненных чемпионах:
   - `room` — связь один-к-одному с `DraftRoom`
   - `champions_Blue_team`, `champions_Red_team` — списки имён забаненных чемпионов (хранятся как JSON-массивы строк)

3. **PickPhase** — данные о выбранных чемпионах:
   - `room` — связь один-к-одному с `DraftRoom`
   - `champions_Blue_team`, `champions_Red_team` — списки имён выбранных чемпионов (JSON-массивы строк, порядок соответствует ролям: Top → Jungle → Mid → ADC → Support)

> Примечание: Распределение по ролям реализуется на уровне интерфейса; порядок в массиве фиксирован.

## Основные сценарии пользователя (User Stories)

1. **Создание комнаты:** Пользователь заходит на сайт, нажимает «Создать драфт» — создаётся комната, генерируется уникальная ссылка, которую он может отправить партнёру.
2. **Присоединение к драфту:** Пользователь переходит по ссылке, автоматически становится капитаном одной из команд (в зависимости от наличия свободного места), видит текущий этап драфта.
3. **Бан чемпионов:** По очереди игроки выбирают чемпионов для бана (по 2 на команду); система блокирует повторный выбор и следит за очерёдностью.
4. **Пик чемпионов и распределение по ролям:** После банов начинается фаза пиков (по 5 чемпионов на команду); каждый пик сопровождается выбором роли (Top/Jungle/Mid/ADC/Support).
5. **Просмотр итогового состава:** По завершении драфта обе команды видят финальные составы с распределением по ролям и могут сохранить или поделиться результатом.

## Технический стек и интеграции

- **Backend:** Django (Python), SQLite
- **Frontend:** HTML/CSS/JavaScript
- **Хранение состояния:** Cookies для идентификации пользователя, Django ORM для хранения комнат и драфтов
- **Внешний API:** [Data Dragon (DDragon) от Riot Games](https://ddragon.leagueoflegends.com/) — используется для получения актуального списка чемпионов, их имён и иконок. Запросы выполняются на стороне клиента или через прокси-эндпоинт в Django для обхода CORS.
- **Развёртывание:** Docker-контейнер с Gunicorn, статические файлы собираются через `collectstatic`, хостинг — Render.com или аналогичный бесплатный сервис.

Проект обеспечивает «техническую нагрузку» за счёт:
- Парсинга и кэширования данных DDragon API
- Логики чередования ходов и валидации драфта
- Динамического обновления UI без перезагрузки страницы